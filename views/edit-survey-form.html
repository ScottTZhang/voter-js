
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>Edit a Survey</title>
<!-- Bootstrap core CSS -->
<link href="/public/css/bootstrap.min.css" rel="stylesheet">
<script src="/public/js/jquery-2.1.1.min.js"></script>
<script src="/public/js/createSurvey.js"></script>
</head>

<body>
  <div class="container">
    <div class="row">

      <h1>Edit a Survey</h1>
      <p>Here you can edit your survey.</p>
      {% if msg %}
        <div class="alert alert-danger" role="alert">{{msg}}</div>
      {% endif %}
      <form class="form-horizontal" role="form">
        <div class="form-group form-group-lg {% if data[0].titleExcept %}has-error{% endif %}">
          <label for="forName" class="col-sm-2 control-label">Survey Title</label>
          <div class="col-sm-10">
            <input name="name" class="form-control input-lg" type="text" id="forName" placeholder="Create a title here" value="{{data[0].stitle}}"/>
            {% if data[0].titleExcept %}
              <span id="helpBlock" class="help-block">{{data[0].titleExcept}}</span>
            {% endif %}
          </div>
        </div>

        <div class="form-group {%if data[0].cntQuestionExcept %}has-error{%endif%} " >
          <label for="forDescription" class="col-sm-2 control-label">Description</label>
          <div class="col-sm-10">
            <textarea id="forDescription" name="description" class="form-control" placeholder="Description" rows="3">{{data[0].sdesc}}</textarea>
          {% if data[0].cntQuestionExcept %}
            <span id="helpBlock" class="help-block">{{data[0].cntQuestionExcept}}</span>
          {% endif %}
          </div>
        </div>

        {% for question in data %}
          {% if loop.index == 1 or data[loop.index - 1].qid != data[loop.index - 2].qid %}
            {% if loop.index != 1 %}
                <div class="form-group add_item">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button type="button" class="btn btn-default add_item_class">Add Item</button>
                  </div>
                </div>
              </div>
            {% endif %}
            <div class="question">
              <div class="form-group {% if data[loop.index-1].questionExcept or data[loop.index-1].cntItemExcept %}has-error{% endif %}">
                </br>
                  <label for="forQuestion" class = "col-sm-2 control-label">Question</label>
                  <div class="col-sm-8">
                    <input name="question" class="form-control" type="text" placeholder="Describe your question" value="{{data[loop.index-1].question}}" data-id="{{data[loop.index-1].qid}}" data-delete='0'/>
                    {% if data[loop.index-1].questionExcept %}
                      <span id="helpBlock" class="help-block">{{data[loop.index-1].questionExcept}}</span>
                    {% endif %}
                    {% if data[loop.index-1].cntItemExcept %}
                      <span id="helpBlock" class="help-block">{{data[loop.index-1].cntItemExcept}}</span>
                    {% endif %}
                  </div>
                  <div class="col-sm-2">
                    <button type="button" class="btn btn-warning btn-sm delete_question_class">Delete</button>
                  </div>
              </div>

              <div class="form-group item {% if data[loop.index-1].itemExcept %}has-error{% endif %}">
                <label for="forItem1" class = "col-sm-2 control-label">Item</label>
                <div class="col-sm-8">
                  <input name="item" class="form-control" type="text" placeholder="item" value="{{data[loop.index-1].item}}" data-id="{{data[loop.index-1].iid}}" data-delete/>
                  {% if data[loop.index-1].itemExcept %}
                  <span id="helpBlock" class="help-block">{{data[loop.index-1].itemExcept}}</span>
                  {% endif %}
                </div>
                <div class="col-sm-2">
                  <button type="button" class="btn btn-warning btn-sm delete_item_class">Delete</button>
                </div>
              </div>
            {% if loop.index == loop.length %}
              <div class="form-group add_item">
                <div class="col-sm-offset-2 col-sm-10">
                  <button type="button" class="btn btn-default add_item_class">Add Item</button>
                </div>
              </div>
            </div>
            {% endif %}
          {% else %}
            <div class="form-group item {% if data[loop.index-1].itemExcept %}has-error{% endif %}">
              <label for="forItem1" class = "col-sm-2 control-label">Item</label>
              <div class="col-sm-8">
                <input name="item" class="form-control" type="text" placeholder="item" value="{{data[loop.index-1].item}}" data-id="{{data[loop.index-1].iid}}" data-delete/>
                {% if data[loop.index-1].itemExcept%}
                  <span id="helpBlock" class="help-block">{{data[loop.index-1].itemExcept}}</span>
                {% endif %}
              </div>
              <div class="col-sm-2">
                <button type="button" class="btn btn-warning btn-sm delete_item_class">Delete</button>
              </div>
            </div>
            {% if loop.index == loop.length %}
                <div class="form-group add_item">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button type="button" class="btn btn-default add_item_class">Add Item</button>
                  </div>
                </div>
              </div>

            {% endif %}
          {% endif %}
        {% endfor %}

        <div class="form-group add_question">
          </br>
          <div class="col-sm-offset-2 col-sm-10">
            <input type="button" id="add_question_btn" class="btn btn-default" value="Add Question">
          </div>
        </div>

        <div class="form-group">
          </br>
          <div class="col-sm-offset-2 col-sm-10">
            <input type="button" id="edit_survey_btn" class="btn btn-default" value="Save Survey">
          </div>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
